(install.packages("vitae"))
library(vitae)
pagedown::html_resume()
pagedown::html_resume()
# CHALLENGE ---------------------------------------------------------------
library(tidyverse)
library(lubridate)
covid_data_tbl <- read_csv("https://covid.ourworldindata.org/data/owid-covid-data.csv")
## Challenge 2
library("maps")
world <- map_data("world")
world
deaths <- covid_data_tbl %>%
# Filter
filter(!is.na(total_deaths)) %>%
# Group
group_by(location) %>%
# summarise(total_deaths = sum(deaths)) %>%
summarise(`Mortality Rate` = max(total_deaths) / population) %>%
ungroup() %>%
# Rename
# mutate(across(countriesAndTerritories, str_replace_all, "_", " ")) %>%
mutate(location = case_when(
location == "United Kingdom" ~ "UK",
location == "United States" ~ "USA",
location == "Democratic Republic of Congo" ~ "Democratic Republic of the Congo",
TRUE ~ location
)) %>%
distinct()
plot_data <- world %>%
left_join(deaths, by = c(region = "location"))
plot_data %>% filter(region == "USA")
g <- plot_data %>% ggplot(aes(long, lat)) +
geom_map(aes(map_id = region, fill = `Mortality Rate`), map = world, color = "grey", size = 0.1) +
# theme(legend.position = "none") +
# scale_fill_gradient(low = "#EE4540", high = "#2D142C", labels = scales::percent) +
scale_fill_gradient(low = "#ee4540", high = "#2d142c", labels = scales::percent, na.value = "grey") +
labs(
title = "Confirmed COVID-19 deaths relative to the size of the population",
subtitle = "Around 6.2 Million confirmed COVID-19 deaths worldwide",
caption  = "Date: 04/16/2021",
color    = "Mortality Rate"
) +
tidyquant::theme_tq() +
theme(axis.title = element_blank(),
axis.text  = element_blank(),
axis.ticks = element_blank(),
legend.position = "right")
g
deaths
plot_data
names(plot_data)
plot_data %>% ggplot(aes(long, lat)) +
geom_map(aes(map_id = region, fill = `Mortality Rate`), map = world, color = "grey", size = 0.1) +
# theme(legend.position = "none") +
# scale_fill_gradient(low = "#EE4540", high = "#2D142C", labels = scales::percent) +
scale_fill_gradient(low = "#ee4540", high = "#2d142c", labels = scales::percent, na.value = "grey") +
labs(
title = "Confirmed COVID-19 deaths relative to the size of the population",
subtitle = "Around 6.2 Million confirmed COVID-19 deaths worldwide",
caption  = "Date: 04/16/202",
color    = "Mortality Rate"
)
?geom_label
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
data <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv")
covid_plot_data <- covid_data_tbl %>%
# filter(!is.na(new_cases)) %>%
# mutate(date      = dmy(dateRep)) %>%
arrange(date) %>%
group_by(continent) %>%
mutate(cum_cases_continent = cumsum(replace_na(new_cases, 0))) %>%
ungroup() %>%
group_by(location) %>%
# mutate(cum_cases_country = cumsum(new_cases)) %>%
ungroup()
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,] |> select(total_cases)
scales::comma(cum_cases_continent,
big.mark     = ".",
decimal.mark = ",")
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
scales::cut_short_scale
install.packages("scales")
install.packages("scales")
install.packages("tidyverse")
install.packages("rlang")
install.packages("rlang")
install.packages("dplyr")
install.packages("readr")
