(install.packages("vitae"))
library(vitae)
pagedown::html_resume()
pagedown::html_resume()
# CHALLENGE ---------------------------------------------------------------
library(tidyverse)
library(lubridate)
covid_data_tbl <- read_csv("https://covid.ourworldindata.org/data/owid-covid-data.csv")
## Challenge 2
library("maps")
world <- map_data("world")
world
deaths <- covid_data_tbl %>%
# Filter
filter(!is.na(total_deaths)) %>%
# Group
group_by(location) %>%
# summarise(total_deaths = sum(deaths)) %>%
summarise(`Mortality Rate` = max(total_deaths) / population) %>%
ungroup() %>%
# Rename
# mutate(across(countriesAndTerritories, str_replace_all, "_", " ")) %>%
mutate(location = case_when(
location == "United Kingdom" ~ "UK",
location == "United States" ~ "USA",
location == "Democratic Republic of Congo" ~ "Democratic Republic of the Congo",
TRUE ~ location
)) %>%
distinct()
plot_data <- world %>%
left_join(deaths, by = c(region = "location"))
plot_data %>% filter(region == "USA")
g <- plot_data %>% ggplot(aes(long, lat)) +
geom_map(aes(map_id = region, fill = `Mortality Rate`), map = world, color = "grey", size = 0.1) +
# theme(legend.position = "none") +
# scale_fill_gradient(low = "#EE4540", high = "#2D142C", labels = scales::percent) +
scale_fill_gradient(low = "#ee4540", high = "#2d142c", labels = scales::percent, na.value = "grey") +
labs(
title = "Confirmed COVID-19 deaths relative to the size of the population",
subtitle = "Around 6.2 Million confirmed COVID-19 deaths worldwide",
caption  = "Date: 04/16/2021",
color    = "Mortality Rate"
) +
tidyquant::theme_tq() +
theme(axis.title = element_blank(),
axis.text  = element_blank(),
axis.ticks = element_blank(),
legend.position = "right")
g
deaths
plot_data
names(plot_data)
plot_data %>% ggplot(aes(long, lat)) +
geom_map(aes(map_id = region, fill = `Mortality Rate`), map = world, color = "grey", size = 0.1) +
# theme(legend.position = "none") +
# scale_fill_gradient(low = "#EE4540", high = "#2D142C", labels = scales::percent) +
scale_fill_gradient(low = "#ee4540", high = "#2d142c", labels = scales::percent, na.value = "grey") +
labs(
title = "Confirmed COVID-19 deaths relative to the size of the population",
subtitle = "Around 6.2 Million confirmed COVID-19 deaths worldwide",
caption  = "Date: 04/16/202",
color    = "Mortality Rate"
)
?geom_label
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
data <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv")
covid_plot_data <- covid_data_tbl %>%
# filter(!is.na(new_cases)) %>%
# mutate(date      = dmy(dateRep)) %>%
arrange(date) %>%
group_by(continent) %>%
mutate(cum_cases_continent = cumsum(replace_na(new_cases, 0))) %>%
ungroup() %>%
group_by(location) %>%
# mutate(cum_cases_country = cumsum(new_cases)) %>%
ungroup()
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,] |> select(total_cases)
scales::comma(cum_cases_continent,
big.mark     = ".",
decimal.mark = ",")
covid_plot_data %>% filter(continent == "Europe") %>% slice_max(cum_cases_continent) %>% .[1,]
scales::cut_short_scale
install.packages("scales")
install.packages("scales")
install.packages("tidyverse")
install.packages("rlang")
install.packages("rlang")
install.packages("dplyr")
install.packages("readr")
library(rvest)
setwd("/Users/jschwarz/Desktop")
html <- read_html("test.html.html")
html
html |>
html_elements(".course-block-collapsed__title")
html <- read_html("test.html")
html |>
html_elements(".course-block-collapsed__title")
html |>
html_elements("h4")
html |>
html_elements("h4 .course-block__title")
html |>
html_elements(".course-block__title")
html |>
html_elements(".course-block__title") |>
html_text()
html |>
html_elements(".track__course") |>
html_elements(".course-block__title") |>
html_text()
html |>
html_elements(".track__course") |>
# html_elements(".course-block__title") |>
html_text()
html |>
html_elements(".track__course") |>
html_attr('href') |>
# html_elements(".course-block__title") |>
html_text()
html |>
html_elements(".track__course") |>
html_attr('href') #|>
html |>
html_elements(".track__course")
html |>
html_elements(".block__link")
html |>
html_elements(".dc-btn")
html |>
html_elements(".dc-btn--tertiary")
html |>
html_elements(".dc-btn--tertiary") |>
html_attr('href')
html <- read_html("test.html")
html |>
html_elements(".course-block__link") |>
html_attr('href')
html |>
html_elements(".track__course")
html |>
html_elements(".course-block__title") |>
html_text()
html |>
html_elements(".course-block__link") |>
html_attr('href')
links <- html |>
html_elements(".course-block__link") |>
html_attr('href')
str_c("data", links)
stringr::str_c("data", links)
stringr::str_c("https://app.datacamp.com/learn", links)
library(magrittr)
links <- html |>
html_elements(".course-block__link") |>
html_attr('href') %>%
stringr::str_c(., "https://app.datacamp.com/learn")
links
links <- html |>
html_elements(".course-block__link") |>
html_attr('href') %>%
stringr::str_c("https://app.datacamp.com/learn", .)
links
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
thrid <- '<a/>'
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
<a href="https://www.datacamp.com" target="_blank" rel="noopener">DataCamp</a>
first <- "<a href="
first <- "<a href=\""
first
second <- 'target="_blank" rel="noopener">'
thrid <- '<a/>'
stringr::str_c(first, links, , titles, third)
stringr::str_c(first, links, titles, third)
titles <- html |>
html_elements(".course-block__title") |>
html_text()
stringr::str_c(first, links, titles, third)
stringr::str_c(first, links, titles, thrid)
thrid <- '<a/></li>'
first <- "<li><a href=\""
stringr::str_c(first, links, titles, thrid)
stringr::str_c(first, links, titles, thrid) |> cat()
stringr::str_c(first, links, titles, thrid) |> cat(sep = "\n")
stringr::str_c(first, links, second, titles, thrid) |> cat(sep = "\n")
second <- 'target="_blank" rel="noopener"> '
stringr::str_c(first, links, second, titles, thrid) |> cat(sep = "\n")
first <- '<div class="row"><div class="col-auto"><a href="'
second <- '" target="_blank" rel="noopener">'
third <- '</a></div><div class="col text-end">See certificate</div></div>'
stringr::str_c(first, links, second, titles, thrid) |> cat(sep = "\n")
stringr::str_c(first, links, second, titles, third) |> cat(sep = "\n")
numbers <- c(1:length(links))
numbers
stringr::str_c(first, links, second, numbers, ". ", titles, third) |> cat(sep = "\n")
install.packages("pagedown")
